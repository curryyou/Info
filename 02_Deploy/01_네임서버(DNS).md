## DNS 구조
<img src="DNS구조.jpeg" width="600px">

<br>

### 호스트?
#### : 네트워크 상에 연결되어 있는 각각의 '컴퓨터'들을 의미한다.
#### : 각 호스트 컴퓨터들은 인터넷에 연결되는 순간, 자신만의 고유한 ip 주소를 갖게 된다.(DHCP)
#### : 브라우저에 주소 입력시, 다음의 순서로 작업이 이루어진다.
1. 브라우저에 '도메인 주소' 입력하면,
2. 브라우저는 네임서버에 '도메인 주소' 요청하고,
3. 네임서버가 'IP주소'응답해주면,
4. 브라우저는 'IP주소'에 해당하는 호스트 컴퓨터(서버)에 요청하고,
5. 호스트 컴퓨터가 웹페이지 등을 응답하면,
6. 브라우저는 응답받은 결과를 화면에 렌더링 한다.

<br>

### 브라우저의 IP 탐색 순서
#### 브라우저 주소창에 도메인 주소를 입력하면, 다음의 순서로 IP를 찾는다.
1. local chache를 검색
    - 한번 방문한 이력이 있는 도메인의 IP주소를 기억해두고, 다음 요청시 해당 IP로 바로 이동
    - 로컬 캐시 삭제 방법 (안 되면 재부팅)
        - 윈도우 : ipconfig /renew
2. hosts 파일 검색
    - local cache에서 검색되지 않는 도메인 주소는, hosts 파일에 설정된 {도메인주소:IP}대로 이동한다.
    - 운영체제마다 특정 공간에 host 파일을 저장해두고 관리한다.
    - hosts 파일에는 {도메인주소:IP}가 저장되어 있다.
3. DNS 서버를 검색
 
<br>

### 네임서버(DNS: Domain Name System Server)?
#### : '도메인' 주소를 request 하면, 'IP'를 response 해주는 ***서버***
#### : 한마디로 {도메인주소:ip주소}가 저장되어 있는 전화번호부 같은 개념이다.
- 보통 도메인 판매대행(가비아 등) 업체나 DNSZi등에서 네임 서버를 제공한다.(여기에 내 {도메인:IP}가 저장된다)
- 네임서버에 문제가 생길 경우를 대비해, 보통 4~5차 네임서버까지 제공한다.
- 네임서버에 내 도메인을 설정한 다음, '도메인을 관리하는 인터닝 기관'에 내 도메인이 설정된 네임서버가 무엇인지 등록해야 한다.
    1. dnszi 등의 네임서버에 나의 도메인을 등록. 
    2. '인터닝 기관'에 내 도메인이 등록된 네임서버를 등록(도메인 구입 사이트에서 등록 가능)
#### : 도메인 네임 서버는 여러대가 있다
<br>

### 호스트 설정
#### : 특정 '도메인' 주소를 입력하면, 특정 ***'IP'*** 주소로 이동시키는 개념
#### : 즉, DNS 네임서버에 {도메인주소 : IP}를 설정하는 작업

<br>

### 포워딩 설정
#### : 특정 '도메인' 주소를 입력하면, 다른 ***'도메인'*** 주소로 이동시키는 개념
#### : blog.dogumaster.com 입력시, curryyou.tistory.com 으로 이동하도록 설정하는 작업
 1. 유동 포워딩: 주소창에 입력한 주소가 ***포워딩하는 주소로 변경*** 되면서 포워딩 됨
 2. 고정 포워딩: 주소창에 입력한 주소가 ***변경되지 않고***, 포워딩 됨



<br>

### Public DNS
#### 브라우저에서 특정 도메인 입력 시, DNS에 접속하여 ip를 받아오는데, DNS서버 자체의 주소는 어떻게 알 수 있을까?
#### 인터넷에 연결된 컴퓨터는 내부에 'DNS 서버의 ip주소'를 저장해둔다.
> 맥의 경우 `시스템환경설정 > 네트워크 > 고급 > DNS` 에서 확인할 수 있다.
1. 컴퓨터가 인터넷에 연결돠면,
2. 통신사(ISP)에서 자신들의 제공하는 DNS의 ip를 내 컴퓨터에 설정해둔다.
3. 이때 통신사가 제공하는거 말고, 다른 public DNS를 설정해둘 수 있다.
    - 예를 들어 cloudfare(1.1.1.1)이나 googlePulbicDNS(8.8.8.8) 등을 설정할 수 있다.
    - 맥의 경우 `시스템환경설정 > 네트워크 > 고급 > DNS` 에서 설정하면 된다.

<br>

### 네임서버 관리 서비스(dnszi, dnsever 등)
#### : 네임서버를 제공하고, 도메인을 통합 관리 서비스를 제공해주는 업체
1. 호스트 IP 관리(A레코드)
    - 호스트 설정 작업을 의미하며, 도메인 주소 입력시 이동할 ***ip주소*** 를 등록하는 기능
    - dogumaster.com 뿐만 아니라, blog.dogumaster.com 처럼 앞에 다른 이름을 붙일 수 있는 2차 도메인 설정도 가능
2. 포워딩
    - 포워딩 설정을 의미하며, 특정 '도메인' 주소 입력시 이동할 다른 ***'도메인'*** 주소를 등록하는 기능

<br>
