 ## 도메인 구조
 <img src="도메인구조.jpeg" width="600px">

<br>

1. . : Root 도메인 관리 DNS서버 (Root 도메인( . )은 주로 생략된다.)
2. com : Top-level 도메인 관리 DNS서버
3. example : Second-level 도메인 관리 DNS서버
4. blog : sub 도메인 관리 DNS서버


<br>

### DNS 구조
#### `상위 도메인을 관리하는 DNS > 하위 도메인을 관리하는 DNS` 로 방향으로 탐색하도록 순차적으로 구성된다.

<img src="DNS작동원리.jpeg" width="600px">



<br><br>

### 도메인:ip 탐색 방식
1. 내 컴퓨터에서 dev.dogumaster.com. 을 요청
2. 내 컴퓨터에 설정된 통신사(ISP)의 DNS서버가 요청을 받아, Root도메인 DNS서버에 요청
3. . Root DNS 서버는 com을 전담하는 Top-level DNS서버의 ip응답
4. 통신사의 DNS서버는 다시 Top-level DNS 서버에 도메인을 요청
5. Top-level DNS서버는 Second-level DNS서버의 ip를 응답
6. 통신사의 DNS서버에서 다시 Second-level DNS서버에 도메인을 요청
7. (여기부터 네임서버제공업체 영역) Second-level DNS서버는 sub DNS서버의 ip를 응답
8. 통신사의 DNS서버에서 다시 sub DNS서버에 도메인을 요청
9. sub DNS서버가 최종적으로 해당 도메인에 할당된 ip를 응답.
10. 통신사의 DNS서버는 내 컴퓨터에게 최종 ip를 응답
11. 내 컴퓨터는 최종적으로 받은 ip로 접속.

<br>

### DNS 등록 작업 구조
|Registrant(등록자)|Registrar(등록대행자)|Registry(등록소)|ICANN
|:-----:|:----:|:----:|:----:|
서버제공자|도메인/네임서버 등록 대행자|Top-level도메인 관리기관|Root네임서버 관리 기관|
<br>

1. ICANN: 전세계 ip를 관리하고, Root 네임 서버 (a.root-servers.net ~ m.root-servers.net) 운영
2. Registry(등록소): Top-level Domain 관리(a.gtld-servers.net )
3. Registrar(등록대행자): 등록 대행 업체
    - 네임 서버 제공(등록대행자 외에도 무료 제공 업체들도 있음)
4. Registrant(등록자): 서버 운영자(나 같은 사람)

<br>

### 도메인에 ip가 등록되어 관리되는 방식
|Registrant(등록자)|네임서버 제공업체|Registrar(등록대행자)|Registry(등록소)|ICANN
|:-----:|:----:|:----:|:----:|:----:|
도메인 구입, 네임서버 지정, ip설정|네임서버 관리: {도메인:A ip}|등록 대행: Retistry쪽에 {도메인: NS 네임서버} 등록 |{도메인: NS 네임서버} 관리|{Top-level도메인: NS Top-lever네임서버} 관리|
|dogumaster.com구입, dnszi네임서버 지정, 1.222.31.1 설정|{dogumaster.com:A 1.222.31.1}보관|{dogumaster.com: NS 네임서버주소} 등록 대행|{dogumaster.com: NS 네임서버주소}보관|{com: a.gtld-dervers.net}보관
<br>

1. 나는 도메인을 산다.
2. 나는 도메인을 관리할 네임서버를 지정하고, 해당 네임서버에 {도메인: A ip}를 등록한다.
    - ip를 지정하는걸 A 레코드 타입이라고 한다.
    - 네임서버 전용 제공업체(dnszi 등)나, 도메인을 구입한 등록대행자의 네임서버를 이용할 수 있다.
3. 네임서버 제공업체는 네임서버에 {도메인: A ip} 를 보관/관리한다.
4. 나는 등록대행자에게 내가 산 도메인의 네임서버가 무엇인지 등록한다.
5. 등록대행자는 Registry(등록소)에 {도메인: NS 네임서버}를 등록해준다.
    - 네임서버를 지정하는걸 NS레코드 타입이라고 한다.
6. Registry는 {도메인: NS 네임서버} 를 보관/관리한다.
7. ICANN은 {com: NS a.gtld-servers.net}m {net: NS b.gtld-servers.net} 등 Top-level 도메인의 네임서버 주소만 보관/관리한다.

<br>

### 레코드 타입 도메인에 할당된 주소의 종류? 네임서버인지, ip인지 
- {도메인: 레코드타입 레코드} 형식으로 저장한다
- NS레코드 타입{dogumaster.com: NS ns11.dnszi.com}
- A레코드 타입{dogumaster.com: A 185.199.111.153}